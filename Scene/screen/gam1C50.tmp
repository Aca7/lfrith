[gd_scene load_steps=11 format=3 uid="uid://b0314etxx5ymu"]

[ext_resource type="Script" path="res://Script/system/game.gd" id="1_omvu2"]
[ext_resource type="PackedScene" uid="uid://dmr0fcamx7t56" path="res://addons/virtual_joystick/virtual_joystick_scene.tscn" id="2_5hp2m"]
[ext_resource type="PackedScene" uid="uid://bjd1ederq1j1d" path="res://Scene/charactor/player.tscn" id="3_s7s5q"]
[ext_resource type="PackedScene" uid="uid://dep60va8cdvhb" path="res://Scene/charactor/obstacle.tscn" id="4_5frsx"]

[sub_resource type="Curve2D" id="Curve2D_bd1pg"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, -695, -1034, 0, 0, 0, 0, 608, -1031, 0, 0, 0, 0, 608, 995, 0, 0, 0, 0, -680, 998, 0, 0, 0, 0, -698, 998, 0, 0, 0, 0, -692, -1031)
}
point_count = 6

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_soc45"]
bg_color = Color(0.6, 0.6, 0.6, 0)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_1rdmw"]
bg_color = Color(0.6, 0.6, 0.6, 0.509804)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_m366d"]
bg_color = Color(0.246991, 0.71513, 5.77569e-07, 1)

[sub_resource type="LabelSettings" id="LabelSettings_2u7hy"]
font_size = 25
font_color = Color(0, 0, 0, 1)

[sub_resource type="LabelSettings" id="LabelSettings_ebuxk"]
font_size = 70

[node name="Game" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_omvu2")

[node name="Player" parent="." node_paths=PackedStringArray("joystick") instance=ExtResource("3_s7s5q")]
position = Vector2(0, 200)
joystick = NodePath("../UI/GameUI/Virtual Joystick")

[node name="Camera2D" type="Camera2D" parent="Player"]
position = Vector2(0, 200)
zoom = Vector2(0.5, 0.5)

[node name="Path2D" type="Path2D" parent="Player/Camera2D"]
curve = SubResource("Curve2D_bd1pg")

[node name="PathFollow2D" type="PathFollow2D" parent="Player/Camera2D/Path2D"]
unique_name_in_owner = true
position = Vector2(-695, -1034)
rotation = 0.00230237

[node name="Timer" type="Timer" parent="."]
autostart = true

[node name="Obstacle" parent="." instance=ExtResource("4_5frsx")]

[node name="UI" type="CanvasLayer" parent="."]
process_mode = 3
layer = 10

[node name="GameUI" type="Panel" parent="UI"]
offset_right = 720.0
offset_bottom = 1280.0
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_styles/panel = SubResource("StyleBoxFlat_soc45")

[node name="Virtual Joystick" parent="UI/GameUI" instance=ExtResource("2_5hp2m")]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_right = 0.5
offset_left = -150.0
offset_top = -300.0
offset_right = 150.0
offset_bottom = 0.0
grow_horizontal = 2
size_flags_vertical = 8
use_input_actions = false
action_left = "left"
action_right = "right"
action_up = "up"
action_down = "down"

[node name="Exp" type="ProgressBar" parent="UI/GameUI"]
layout_mode = 0
offset_right = 720.0
offset_bottom = 40.0
theme_override_styles/background = SubResource("StyleBoxFlat_1rdmw")
theme_override_styles/fill = SubResource("StyleBoxFlat_m366d")

[node name="Level_label" type="Label" parent="UI/GameUI"]
layout_mode = 0
offset_top = 41.0
offset_right = 152.0
offset_bottom = 86.0
text = "Lv.1"
label_settings = SubResource("LabelSettings_2u7hy")

[node name="GameOverUI" type="Panel" parent="UI"]
visible = false
offset_right = 720.0
offset_bottom = 1280.0
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_styles/panel = SubResource("StyleBoxFlat_soc45")

[node name="ColorRect" type="ColorRect" parent="UI/GameOverUI"]
layout_mode = 0
offset_right = 720.0
offset_bottom = 1283.0
color = Color(0.0588235, 0.0588235, 0.0588235, 0.768627)

[node name="Label" type="Label" parent="UI/GameOverUI"]
layout_mode = 0
offset_right = 720.0
offset_bottom = 1281.0
text = "Game Over"
label_settings = SubResource("LabelSettings_ebuxk")
horizontal_alignment = 1
vertical_alignment = 1

[node name="Button" type="Button" parent="UI/GameOverUI"]
layout_mode = 0
offset_left = 268.0
offset_top = 716.0
offset_right = 450.0
offset_bottom = 800.0
text = "retry"

[node name="LevelUpUI" type="Panel" parent="UI"]
visible = false
offset_right = 720.0
offset_bottom = 1280.0
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_styles/panel = SubResource("StyleBoxFlat_soc45")

[node name="BoxContainer" type="BoxContainer" parent="UI/LevelUpUI"]
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 88.0
offset_bottom = -272.0
grow_horizontal = 2
grow_vertical = 2
alignment = 1
vertical = true

[node name="LevelUpChoice1" type="Button" parent="UI/LevelUpUI/BoxContainer"]
layout_mode = 2
size_flags_vertical = 3
text = "Atk + 10"

[node name="LevelUpChoice2" type="Button" parent="UI/LevelUpUI/BoxContainer"]
layout_mode = 2
size_flags_vertical = 3
text = "Atk_speed + 10%"

[node name="LevelUpChoice3" type="Button" parent="UI/LevelUpUI/BoxContainer"]
layout_mode = 2
size_flags_vertical = 3
text = "speed + 100"

[connection signal="level_up" from="." to="Player" method="_on_game_level_up"]
[connection signal="health_depleted" from="Player" to="." method="_on_player_health_depleted"]
[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="pressed" from="UI/GameOverUI/Button" to="." method="_on_button_pressed"]
[connection signal="pressed" from="UI/LevelUpUI/BoxContainer/LevelUpChoice1" to="." method="_on_level_up_choice_1_pressed"]
[connection signal="pressed" from="UI/LevelUpUI/BoxContainer/LevelUpChoice2" to="." method="_on_level_up_choice_2_pressed"]
[connection signal="pressed" from="UI/LevelUpUI/BoxContainer/LevelUpChoice3" to="." method="_on_level_up_choice_3_pressed"]
